/*! pandamvc - v2.0.2 - 2015-07-31 */!function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.constructor=d,d.extend=arguments.callee,d}}(),function(a){var b=function(){this.name="URI",this.version="2.0.1"};this.URI=new b,b=this.URI;var c="#/home",d="tpl",e={};b.hasURI=function(a){if("string"!=typeof a||0==a.length)return!1;var b="";try{b=a.substr(2).replace("/","_")+"_uri"}catch(c){}return"object"==typeof e[b]?!0:!1},b.setHomeURI=function(a){this.hasURI(a)&&(e.context.homeURI=a)},b.getHomeURI=function(){var a=e.context||{};return a.homeURI||c},b.getTemplateSuffix=function(){var a=e.context||{};return a.templateSuffix||d},b.getBeforeController=function(){var a=e.context||{};return a.before_controller},b.getAfterController=function(){var a=e.context||{};return a.after_controller},b.getQueryString=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},b.isRefresh=function(a){var b=e.context||{};return b.refresh&&b.refreshFlag!=a?!0:!1},b.getURIS=function(){return e},b.getURI=function(a){return a&&""!=a?e[a]:b.getLocationURI()},b.getLocationURI=function(){var a=window.location.hash;return a&&""!=a?e[a]:e[window.location.pathname]},b.addURI=function(b){a.each(b,function(c,d){parentValue={},a.isEmptyObject(d.extend)||(parentValue=b[d.extend]),"context"==c?e[c]=a.extend(!0,parentValue,d):e[d.uri]=a.extend(!0,parentValue,d)})}}(jQuery),function(a){window.logger="object"!=typeof logger?{log:function(){},error:function(){}}:logger;var b=Class.extend({params:null,append:null,selector:null,template:null,_data:null,requestCount:0,init:function(b){a.extend(this,b)},request:function(){},addEventListener:function(){},sendRequest:function(b,c){if("string"===a.type(b)&&(b=URLParam.getUrlParam(b)),a.isEmptyObject(b))return{};c&&(b=a.extend(!0,{},b,c));var d=this,e=b.success;return a.isFunction(b.complete)?(d.requestCount++,b.complete=function(a,c,e,f,g){b.scope.complete(a,c,e,f,g),d.requestCount--,0===d.requestCount&&d.render()}):a.isFunction(b.success)&&(d.requestCount++,b.success=function(a,b,c,f,g){e.call(a.scope,a,b,c,f,g),d.requestCount--,0===d.requestCount&&d.render()}),Protocol.request(b)},server:function(){this.request(),this.requestCount<1&&this.render()},render:function(){if(this.template&&this.selector){var b=a(mvc.template).find("#"+this.template).text();this.append?a(this.selector).append(mvc.Tmpl(b,this._data)):a(this.selector).html(mvc.Tmpl(b,this._data))}this.addEventListener()},afterRender:function(){},destroy:function(){this.params=null,this.append=null,this.selector=null,this.template=null,this._data=null,this.requestCount=0}});window.EasyController=b}(jQuery),function(){window.logger="object"!=typeof logger?{log:function(){},error:function(){}}:logger;var a=function(){this.name="mvc",this.version="1.0.2"};this.mvc=new a,a=this.mvc,a.template="";a.URI=URI;var b={},c=new RegExp("([^&]*)=([^&]*)(&|$)","g"),d=function(a){for(var b={};null!=(arr=c.exec(a));)arr.length>2&&(b[arr[1]]=arr[2]);return b};a.href=function(a,b){if(a&&"string"==typeof a){if(!b){var c=(new Date).getTime();a=a.indexOf("?")>-1?a+"&t="+c:a+"?t="+c}0==a.indexOf("#")?window.location.hash=a:window.location.href=a}},a.routeRun=function(c){var e={};if(!c||"string"!=typeof c)return void logger.error("uri is "+c);c.indexOf("?")>-1&&(e=d(c.substring(c.indexOf("?")+1,c.length)),c=c.substring(0,c.indexOf("?")));var g=a.URI.getURI(c);if("object"!=typeof g)return void logger.error(c+" is not match route.");var h=g.layout;for(var i in h){var j=h[i];j.id=j.id||f();var k=$(j.selector).attr("uuid");if(k&&(b[k]=$(j.selector).html()),!a.URI.isRefresh(URI.getQueryString("refresh"))&&g.request){logger.log("render cache page.");var l=b[j.id];l&&j.selector&&$(j.selector).html(l)}else{var m=j.controller;m=new m({params:e||{},append:j.append,selector:j.selector,template:j.template});try{m.server()}catch(n){m.destroy(),m=null,logger.error([n,j])}}$(j.selector).attr("uuid",j.id)}g.request=!0};var e=["a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","g0","g1","g2","g3","g4","g5","g6","g7","g8","g9","h0","h1","h2","h3","h4","h5","h6","h7","h8","h9"],f=function(){return e.pop()},g={};a.Tmpl=function(b,c){var d=/\W/.test(b)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):g[b]=g[b]||a.Tmpl(document.getElementById(b).innerHTML);return c?d(c):d},window.mvc=a,window.onhashchange=function(){a.routeRun(window.location.hash)}}(jQuery);
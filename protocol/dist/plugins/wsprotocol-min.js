/*! protocol - v2.0.1 - 2015-07-13 */WSProtocol=function(){var a=null,b=function(){var a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest,a.overrideMimeType&&a.overrideMimeType("text/xml");else{if(!window.ActiveXObject)return null;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}}return a?a:(alert("Giving up :( Cannot create an XMLHTTP instance"),null)},c=function(a){},d=function(a){var b={};return b.targetNSpace=a.targetNSpace,b.url=a.url,b.method=a.method,b.failure=a.failure,b.complete=a.complete,b.type=a.type,b.resultWrapper=a.resultWrapper,b.dataType=a.dataType,b.scope=a.scope,$.isFunction(b.resultWrapper)||(b.resultWrapper=e),b},e=function(a){var b={};return $.isEmptyObject(a)?b:(b.data=((a["soap:Body"]||{})["ns2:"+(a.method||"")+"Response"]||{})["return"],b)},f=function(c){a||(a=b());var d;d='<?xml version="1.0" encoding="utf-8"?>',d+='<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"',d+=' xmlns:xsd="http://www.w3.org/2001/XMLSchema" ',d+=' xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">',d+="<soap:Body>",d+="<"+c.method+">";for(var e in c.parameter)d+="<"+e+">"+c.parameter[e]+"</"+e+">";d+="</"+c.method+">",d+="</soap:Body>",d+="</soap:Envelope>",a.open(c.type||"POST",c.url,!0),a.onreadystatechange=function(){var b={};if(4==a.readyState)if(200==a.status){var d=a.responseText;try{b=$.xml2json(d),b.method=c.method,$.isFunction(c.resultWrapper)&&(b=c.resultWrapper(b)),b.status="success"}catch(e){b.status="error",b.msg="xml parse error."}}else b.status="error",b.msg="There was a problem with the request.";var f=b.status||"error";if("success"===f)$.isFunction(c.afterSuccess)&&c.afterSuccess(c,b,f),$.isFunction(c.success)&&c.success.call(c.scope,c,b,f);else if(4==a.readyState){var g=function(a,b){};f="error",g(b,f)}$.isFunction(c.complete)&&c.complete.call(c.scope,c,f,a)},a.setRequestHeader("Content-Type","text/xml; charset=utf-8"),a.setRequestHeader("SOAPAction",c.targetNSpace+c.method),a.send(d)};Protocol.registerRequest("WS",{type:"IMClient",getOptions:d,validateOptions:c,request:f})}();